# Carbon Estimation API ðŸŒ³

This service provides an API to estimate the digital carbon footprint of an organization's website. It is designed to be a core component of the "Extraordinary" AI Agent project for HackMIT.

The API can operate in two modes:
1.  **Mock Mode:** Uses pre-defined data for quick development and demonstration.
2.  **Live Mode:** Connects to the Cerebras API to dynamically fetch data (not yet implemented in the provided code).

## Features

-   Estimates annual COâ‚‚e (in kg) based on website traffic.
-   Translates COâ‚‚e into an equivalent number of trees needed to offset the emissions.
-   Provides a direct calculation endpoint for known traffic data.
-   Provides an AI-powered endpoint that can estimate traffic based on an organization's name.

## Tech Stack

-   **FastAPI**: For building the high-performance API.
-   **Pydantic**: For data validation and settings management.
-   **Uvicorn**: As the lightning-fast ASGI server.
-   **python-dotenv**: For managing environment variables.

---

## ðŸš€ Getting Started

Follow these instructions to get the API running on your local machine.

### 1. Prerequisites

-   Python 3.8+
-   `pip` package installer

### 2. Setup and Installation

1.  **Clone the repository:**
    ```bash
    git clone [https://github.com/your-username/your-repo-name.git](https://github.com/your-username/your-repo-name.git)
    cd your-repo-name
    ```

2.  **Create and activate a virtual environment:**
    -   **macOS / Linux:**
        ```bash
        python3 -m venv venv
        source venv/bin/activate
        ```
    -   **Windows:**
        ```bash
        python -m venv venv
        .\venv\Scripts\activate
        ```

3.  **Install dependencies:**
    Create a file named `requirements.txt` and add the following lines:
    ```
    fastapi
    uvicorn[standard]
    python-dotenv
    requests
    ```
    Then, run the installation command:
    ```bash
    pip install -r requirements.txt
    ```

4.  **Configure Environment Variables:**
    Create a file named `.env` in the project's root directory. For the hackathon demo, you only need to set it to mock mode:
    ```
    MOCK_AI=True
    ```
    To connect to the real Cerebras API later, you would add your key:
    ```
    MOCK_AI=False
    CEREBRAS_API_KEY="your_actual_api_key_here"
    ```

### 3. Running the Application

With your virtual environment activated, run the server using Uvicorn:

```bash
uvicorn main:app --reload
```

The `--reload` flag automatically restarts the server when you make code changes. The API will be available at `http://127.0.0.1:8000`.

---

## ðŸ“– API Usage

Once the server is running, you can access the interactive API documentation generated by FastAPI at **`http://127.0.0.1:8000/docs`**.

### Estimate by Organization Name (Mocked)

This is the primary endpoint for the hackathon project. It takes an organization's name and returns a mocked carbon footprint estimation.

-   **Endpoint:** `POST /v1/estimate-by-name`
-   **Request Body:**
    ```json
    {
      "name": "Google"
    }
    ```
-   **Success Response (200 OK):**
    ```json
    {
      "annual_footprint_kg_co2e": 100414.03,
      "equivalent_trees_to_offset": 4781.62,
      "parameters": {
        "monthly_visits": 5000000,
        "data_per_visit_mb": 2.5
      },
      "estimation_method": "AI-Generated Inputs (MOCKED for Google)"
    }
    ```

### Estimate with Direct Data

This endpoint is useful for testing or when you already know the website traffic data.

-   **Endpoint:** `POST /v1/estimate`
-   **Request Body:**
    ```json
    {
      "monthly_visits": 10000,
      "data_per_visit_mb": 1.5
    }
    ```
-   **Success Response (200 OK):**
    ```json
    {
      "annual_footprint_kg_co2e": 62.4,
      "equivalent_trees_to_offset": 2.97,
      "parameters": {
        "monthly_visits": 10000,
        "data_per_visit_mb": 1.5
      },
      "estimation_method": "Direct Calculation"
    }
    ```
